openapi: 3.0.0
servers: 
  - url: /
    description: Main server
info:
  description: Manito API
  version: "1.0"
  title: Manito API
  contact:
    email: b.nagy.balint@gmail.com
paths:
  /version:
    get:
      summary: Returns version information about the service
      operationId: endpoint.get_version.get_version
      responses:
        "200":
          description: Version information
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/VersionInfo"
  /users:
    get:
      summary: Lists all users
      operationId: endpoint.get_users.get_users
      tags:
        - user
      responses:
        "200":
          description: List of users
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/User"
  /user/{user_id}:
    get:
      summary: Returns detailed information about a user
      operationId: endpoint.get_user.get_user
      tags:
        - user
      parameters:
        - name: user_id
          in: path
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: User details
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/User"
        "404":
          description: User does not exist
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BasicError"
  /user/{user_id}/wallets:
    get:
      summary: Lists wallets of a user
      operationId: endpoint.get_user_wallets.get_user_wallets
      tags:
        - user
        - wallet
      parameters:
        - name: user_id
          in: path
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: List of wallets
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Wallet"
        "404":
          description: User does not exist
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BasicError"
  /wallet/{wallet_id}:
    get:
      summary: Returns detailed information about a wallet
      operationId: endpoint.get_wallet.get_wallet
      tags:
        - wallet
      parameters:
        - name: wallet_id
          in: path
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: Wallet details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Wallet"
        "404":
          description: Wallet does not exist
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BasicError"
components:
  schemas:
    VersionInfo:
      type: object
      description: Version information about the service
      properties:
        version:
          type: string
          example: 1.2.34
      required:
        - version
    DatabaseId:
      type: integer
      description: Database ID
      example: 528491
    WalletId:
      allOf:
        - $ref: "#/components/schemas/DatabaseId"
        - description: ID of a wallet
    UserId:
      allOf:
        - $ref: "#/components/schemas/DatabaseId"
        - description: ID of a user
    User:
      type: object
      description: Information about a user
      properties:
        id:
          allOf:
            - $ref: "#/components/schemas/UserId"
            - description: ID of the user.
        name:
          type: string
          description: Name of the user.
          example: Some Body
        created_at:
          type: string
          description: Time when the user account was created.
          format: datetime
        deleted_at:
          type: string
          description: Time when the user account was deleted.
          format: datetime
      required:
        - id
        - name
        - created_at
    Wallet:
      type: object
      properties:
        id:
          allOf:
            - $ref: "#/components/schemas/WalletId"
            - description: ID of this wallet
        name:
          type: string
          example: Bank Account at Shady & Co. Banking Trust
        ownerId:
          allOf:
            - $ref: "#/components/schemas/UserId"
            - description: ID of the user who owns this wallet
      required:
        - id
        - name
        - ownerId
    BasicError:
      type: object
      properties:
        message:
          description: Error message
          type: string
      required:
        - message